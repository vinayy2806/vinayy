pipeline {
    agent any

    parameters {
        booleanParam(name: 'APPLY', defaultValue: false, description: 'Apply the Terraform configuration')
        booleanParam(name: 'DESTROY', defaultValue: false, description: 'Destroy the Terraform configuration')
    }

    stages {
        stage('Checkout') {
            steps {
                checkout scm
            }
        }

        stage('Build') {
            steps {
                script {
                    // Add your build commands here
                    echo 'Building...'
                }
            }
        }

        stage('Apply') {
            when {
                expression { params.APPLY }
            }
            steps {
                script {
                    // Add your apply commands here
                    echo 'Applying Terraform configuration...'
                }
            }
        }

        stage('Destroy') {
            when {
                expression { params.DESTROY }
            }
            steps {
                script {
                    // Add your destroy commands here
                    echo 'Destroying Terraform configuration...'
                }
            }
        }
    }

    post {
        always {
            cleanWs()
        }
    }
}